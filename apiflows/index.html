
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../img/logo.PNG">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.0">
    
    
      
        <title>API Flows - FlaskData Documentations</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bc7e593a.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab28b872.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-flows" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="FlaskData Documentations" class="md-header-nav__button md-logo" aria-label="FlaskData Documentations">
      
  <img src="../img/logo.PNG" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            FlaskData Documentations
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              API Flows
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FlaskData Documentations" class="md-nav__button md-logo" aria-label="FlaskData Documentations">
      
  <img src="../img/logo.PNG" alt="logo">

    </a>
    FlaskData Documentations
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Getting Started
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        <span class="md-nav__icon md-icon"></span>
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../registration/" class="md-nav__link">
      Registration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../first_study/" class="md-nav__link">
      First Study
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../manage_studies/" class="md-nav__link">
      Manage Studies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../manage_sites/" class="md-nav__link">
      Manage Sites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../manage_users/" class="md-nav__link">
      Manage Users
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      FlaskData API
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="FlaskData API" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        FlaskData API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api_introduction/" class="md-nav__link">
      API Introduction
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        API Flows
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      API Flows
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#edc" class="md-nav__link">
    EDC
  </a>
  
    <nav class="md-nav" aria-label="EDC">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extract-edc-data" class="md-nav__link">
    Extract EDC Data
  </a>
  
    <nav class="md-nav" aria-label="Extract EDC Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#edcstudyextract-data" class="md-nav__link">
    /edc/study/extract-data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edcstudydownload-csvs-data" class="md-nav__link">
    /edc/study/download-csvs-data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edcstudyextract-study-data-at-crf-level" class="md-nav__link">
    /edc/study/extract-study-data-at-crf-level
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edcstudyextract-study-data-at-crf-level-to-csvs" class="md-nav__link">
    /edc/study/extract-study-data-at-crf-level-to-csvs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edcsubjectscreate-subject" class="md-nav__link">
    /edc/subjects/create-subject
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flask" class="md-nav__link">
    Flask
  </a>
  
    <nav class="md-nav" aria-label="Flask">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flaskcustomerextract-data-to-json" class="md-nav__link">
    /flask/customer/extract-data-to-json
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskcustomerdownload-billing-reports" class="md-nav__link">
    /flask/customer/download-billing-reports
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskdeviceget-logs" class="md-nav__link">
    /flask/device/get-logs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskdeviceinsert-log" class="md-nav__link">
    /flask/device/insert-log
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskstudycreate-update-flask-study" class="md-nav__link">
    /flask/study/create-update-flask-study
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flasksitecreate-update-flask-site" class="md-nav__link">
    /flask/site/create-update-flask-site
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskstudycreate-update-flask-study-users" class="md-nav__link">
    /flask/study/create-update-flask-study-users
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flasksubjectextract-study-event-data-to-csv" class="md-nav__link">
    /flask/subject/extract-study-event-data-to-CSV
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskcrfcreate-crf-and-insert-data" class="md-nav__link">
    /flask/crf/create-CRF-and-insert-data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskcrfcreate-event-crf-and-insert-data" class="md-nav__link">
    /flask/crf/create-event-CRF-and-insert-data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskcrfget-crf-data-ids" class="md-nav__link">
    /flask/crf/get-CRF-data-ids
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskcrfupdate-crf-data" class="md-nav__link">
    /flask/crf/update-CRF-data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-cases" class="md-nav__link">
    Use Cases
  </a>
  
    <nav class="md-nav" aria-label="Use Cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general-example-of-extract-data-using-js" class="md-nav__link">
    General example of extract data using JS:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#save-data-in-crf-js-example" class="md-nav__link">
    Save data in CRF JS Example.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-of-calling-flaskdata-api-using-jquery-older-version" class="md-nav__link">
    Example of calling FlaskData API using jQuery older version
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#edc" class="md-nav__link">
    EDC
  </a>
  
    <nav class="md-nav" aria-label="EDC">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extract-edc-data" class="md-nav__link">
    Extract EDC Data
  </a>
  
    <nav class="md-nav" aria-label="Extract EDC Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#edcstudyextract-data" class="md-nav__link">
    /edc/study/extract-data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edcstudydownload-csvs-data" class="md-nav__link">
    /edc/study/download-csvs-data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edcstudyextract-study-data-at-crf-level" class="md-nav__link">
    /edc/study/extract-study-data-at-crf-level
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edcstudyextract-study-data-at-crf-level-to-csvs" class="md-nav__link">
    /edc/study/extract-study-data-at-crf-level-to-csvs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edcsubjectscreate-subject" class="md-nav__link">
    /edc/subjects/create-subject
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flask" class="md-nav__link">
    Flask
  </a>
  
    <nav class="md-nav" aria-label="Flask">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flaskcustomerextract-data-to-json" class="md-nav__link">
    /flask/customer/extract-data-to-json
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskcustomerdownload-billing-reports" class="md-nav__link">
    /flask/customer/download-billing-reports
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskdeviceget-logs" class="md-nav__link">
    /flask/device/get-logs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskdeviceinsert-log" class="md-nav__link">
    /flask/device/insert-log
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskstudycreate-update-flask-study" class="md-nav__link">
    /flask/study/create-update-flask-study
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flasksitecreate-update-flask-site" class="md-nav__link">
    /flask/site/create-update-flask-site
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskstudycreate-update-flask-study-users" class="md-nav__link">
    /flask/study/create-update-flask-study-users
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flasksubjectextract-study-event-data-to-csv" class="md-nav__link">
    /flask/subject/extract-study-event-data-to-CSV
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskcrfcreate-crf-and-insert-data" class="md-nav__link">
    /flask/crf/create-CRF-and-insert-data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskcrfcreate-event-crf-and-insert-data" class="md-nav__link">
    /flask/crf/create-event-CRF-and-insert-data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskcrfget-crf-data-ids" class="md-nav__link">
    /flask/crf/get-CRF-data-ids
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaskcrfupdate-crf-data" class="md-nav__link">
    /flask/crf/update-CRF-data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-cases" class="md-nav__link">
    Use Cases
  </a>
  
    <nav class="md-nav" aria-label="Use Cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general-example-of-extract-data-using-js" class="md-nav__link">
    General example of extract data using JS:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#save-data-in-crf-js-example" class="md-nav__link">
    Save data in CRF JS Example.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-of-calling-flaskdata-api-using-jquery-older-version" class="md-nav__link">
    Example of calling FlaskData API using jQuery older version
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="api-flows">API flows</h1>
<p>The API has 2 parts of APIs - EDC and Flask.</p>
<ul>
<li>EDC - APIs are related to a ClinCapture EDC instance (extract EDC data etc.)</li>
<li>Flask - APIs are related to Flas data (extract data, insert data etc.)</li>
</ul>
<p>NOTES:</p>
<ul>
<li>
<p>Authorization parameter in the header request should be the token you had get before from you <a href="..#authorization">authorization request</a>.</p>
</li>
<li>
<p>EDC parameter in the header request should be the EDC DB name.</p>
</li>
</ul>
<p>In this document there are a few examples of FlaskData APIs - There are more EDC APIs, their description exists in swagger.</p>
<p>For more details and questions contact us by sending email to <a href="mailto:support@clearclinica.com">support@clearclinica.com</a>.</p>
<h2 id="edc">EDC</h2>
<h3 id="extract-edc-data">Extract EDC Data</h3>
<p>There are a few APIs you can use to extract your ClinCapture EDC data.</p>
<p>For example:</p>
<h4 id="edcstudyextract-data">/edc/study/extract-data</h4>
<p>This API extract EDC data of each table/view/function (like functionName()) and return json.</p>
<p>fromDate, toDate, sort, filters and inputVariables(if tableName is a function) are optional values.</p>
<p>Filters and inputVariable json objects - the key is the column name/ input variable name in postgres, the json value is the compare value (like where site = XXX)/ input value in function (like schema.function(XXX)).</p>
<p>For example:</p>
<p><code>{
  "tableName": "cc_event_data",
  "fromDate": "2017-01-01T00:00:00.000Z",
  "toDate": "2019-02-01T00:00:00.000Z",
  "sort": "subject"
}</code></p>
<p>Another example:</p>
<p><code>{
  "tableName": "cross_event_crf_data"
}</code></p>
<h4 id="edcstudydownload-csvs-data">/edc/study/download-csvs-data</h4>
<p>This API downloads a zip folder includes EDC study data. Each csv is an event CRF data.</p>
<h4 id="edcstudyextract-study-data-at-crf-level">/edc/study/extract-study-data-at-crf-level</h4>
<p>This API extracts EDC data at CRF level and returns the data as a json object.</p>
<p>This API returns only CRFs with data.</p>
<p>This API has filters option (from date and to date are related to date_updated column, filters can include each column and value with equal sign).</p>
<h4 id="edcstudyextract-study-data-at-crf-level-to-csvs">/edc/study/extract-study-data-at-crf-level-to-csvs</h4>
<p>This API extracts EDC data at CRF level and returns a zip folder includes CSV files (each CRF as CSV file).</p>
<p>This API returns only CRFs with data.</p>
<p>This API has filters option (from date and to date are related to date_updated column, filters can include each column and value with equal sign).</p>
<h4 id="edcsubjectscreate-subject">/edc/subjects/create-subject</h4>
<p>This API creates a subject in EDC DB and returns the study_subject_id value.</p>
<h2 id="flask">Flask</h2>
<h3 id="flaskcustomerextract-data-to-json">/flask/customer/extract-data-to-json</h3>
<p>This API extracts data from flask tables and views for your customer.</p>
<p>The table/ view should have customer_id column for this process.</p>
<p>For example: studies table, audit_user_login, billing_reports_customer and etc.</p>
<p>studyIds and filters are optional.</p>
<h3 id="flaskcustomerdownload-billing-reports">/flask/customer/download-billing-reports</h3>
<p>This API downloads a billing reports folder for the month of the billingDate parameter.</p>
<p>The billing report zip folder includes all the billing report files for your customer.</p>
<p>NOTE - This process will download files only if the billing reports features turn on in your customer account.</p>
<h3 id="flaskdeviceget-logs">/flask/device/get-logs</h3>
<p>This API returns device logs of a study.</p>
<h3 id="flaskdeviceinsert-log">/flask/device/insert-log</h3>
<p>This API inserts device log into flaskData with correct study_id according to EDC.</p>
<p>payload parameter is optional and can include each key value pairs.</p>
<h3 id="flaskstudycreate-update-flask-study">/flask/study/create-update-flask-study</h3>
<p>This API creates/updates study in FlaskData.</p>
<h3 id="flasksitecreate-update-flask-site">/flask/site/create-update-flask-site</h3>
<p>This API creates/updates site in FlaskData.</p>
<h3 id="flaskstudycreate-update-flask-study-users">/flask/study/create-update-flask-study-users</h3>
<p>This API creates User if not exists and assigned Users to study.</p>
<p>NOTE - This API deletes the Users that were assigned to this study and assigned the new Users.</p>
<h3 id="flasksubjectextract-study-event-data-to-csv">/flask/subject/extract-study-event-data-to-CSV</h3>
<p>This API extracts all study data (from FlaskForms) based on study id and download CSV files.</p>
<h3 id="flaskcrfcreate-crf-and-insert-data">/flask/crf/create-CRF-and-insert-data</h3>
<p>This API creates CRF in existing event and insert data</p>
<p>Example - Creates a new AE (adverse event) CRF in existing event.</p>
<h3 id="flaskcrfcreate-event-crf-and-insert-data">/flask/crf/create-event-CRF-and-insert-data</h3>
<p>This API creates event and CRF and inserts data.</p>
<p>Example - Creates a new Medication event with CRF and inserts data.</p>
<h3 id="flaskcrfget-crf-data-ids">/flask/crf/get-CRF-data-ids</h3>
<p>This API returns subject's crf data Id (unique for each CRF) for specific crf name.</p>
<h3 id="flaskcrfupdate-crf-data">/flask/crf/update-CRF-data</h3>
<p>This API updates CRF data by crf data id.</p>
<h2 id="use-cases">Use Cases</h2>
<p>NOTE: The following examples require jQuery later version</p>
<h3 id="general-example-of-extract-data-using-js">General example of extract data using JS:</h3>
<pre><code>var xhrcall = $.ajax({
                        url: 'https://dev-api.flaskdata.io/flask/customer/extract-data-to-json',
                        type: 'POST',
                        headers: {
                            'Authorization': jwt},
                        data: '{
                                "tableName": "studies",
                                "fromDate": "2018-03-29T11:44:12.511Z",
                                "toDate": "2019-03-29T11:44:12.511Z"                                    
                              }',
                          contentType: 'application/json'
                      });
  //promise syntax to render after xhr completes
  xhrcall
      .done(function(data){
              // Enter your code here
      })
      .fail(function(error) {
                if(error) {
                    // Enter your code here  
                }
      });
</code></pre>
<h3 id="save-data-in-crf-js-example">Save data in CRF JS Example.</h3>
<p>Your study uses FlaskForms application.</p>
<p>You have a mobile app and you want to collect data and save it to a Flask Forms Event/CRF</p>
<p>This JS code is an example to create CRF and save its data into existing event.</p>
<pre><code>    $(document).ready(function() {
          // Call insertDataIntoFlaskFormsCRF function to assign new CRF and save data.
          // Input values : User email, User password, study id, subject label, event name, CRF name, CRF data.
          insertDataIntoFlaskFormsCRF("mongositerole@clearclinica.com", "123456", 145858, 'mongo_test_site_1-03', 'Screening', 'Subject properties', {"ITEM_SP_AGE_WR6NP":30, "ITEM_SP_MANWOMAN_HDNAO":2});
     });
    var insertDataIntoFlaskFormsCRF = function(uEmail, uPass, studyId, subjectLabel, eventName, crfName, crfData){
        // Get token
        getFlaskDataToken(uEmail, uPass, function(userToken){
            var token = UserToken;
            // Create new CRF in existin event and insert data
            createCRFandInsertData(token, studyId, subjectLabel, eventName, crfName, crfData, function(crfDataId){
                console.log(crfDataId);
                // Save this crfDataId if you will need to update this CRF data                    
            });
        });
    }

    var getFlaskDataToken = function(email, password, cb) {
          // Get JWT token
          var xhrcall = $.ajax({
                                  url: 'https://dev-api.flaskdata.io/auth/authorize',
                                  type: 'POST',
                                  data: '{"email":"' + email + '","password":"' + password +'"}',
                                    contentType: 'application/json'
                                });
            //promise syntax to render after xhr completes
            xhrcall
                .done(function(data){
                        // Enter your code here
                        cb(data.token);
                })
                .fail(function(error) {
                          if(error) {
                              // Enter your code here
                              console.log('Failed to get token ' + error);
                          }
                });
      }

      // Create new CRF and insert data
      // /flask/crf/create-CRF-and-insert-data
      var createCRFandInsertData = function(token, study_id, subject_label, event_name, crf_name, crf_data, cb) {
          var xhrcall = $.ajax({
                                  url: 'https://dev-api.flaskdata.io/flask/crf/create-CRF-and-insert-data',
                                  type: 'POST',
                                  headers: {
                                      'Authorization': token},
                                  data: '{"study_id": '+study_id+',"subject_label": "'+subject_label+'","event_name": "'+event_name+'","crf_name": "'+crf_name+'","crf_data": '+ JSON.stringify(crf_data) +' }',
                                  contentType: 'application/json'
                                });
            //promise syntax to render after xhr completes
            xhrcall
                .done(function(data){
                        // Enter your code here                            
                        cb(data.crfDataId);
                })
                .fail(function(error) {
                          if(error) {
                              // Enter your code here
                              console.log('Failed to create CRF and insert data :' + JSON.stringify(error));
                          }
                });
      }
</code></pre>
<p>Your application should call insertDataIntoFlaskFormsCRF function with the following input parameters:</p>
<ul>
<li>User email - Your customer API User email address for authorization.</li>
<li>User password - Your customer API User password for authorization.</li>
<li>studyId - Your study Id parameter, You can take it from study dashboard URL.
<img alt="Screenshot" src="img/studyId.PNG" /></li>
<li>Subject label - Subject label from flaskdata, for example:
<img alt="Screenshot" src="img/subjectLabel.PNG" /></li>
<li>Event name for creating CRF, for example:
<img alt="Screenshot" src="img/eventName.PNG" /></li>
<li>CRF name for creating CRF, for example (in flask forms):
<img alt="Screenshot" src="img/crfName.PNG" /></li>
<li>CRF data - for saving CRF data, Json structure, key value pair, The key is the item's variable (as it's defined in flask forms) and the value is the data for this variable.
for example: <code>{"ITEM_SP_AGE_WR6NP":30, "ITEM_SP_MANWOMAN_HDNAO":2}</code>
<img alt="Screenshot" src="img/itemVariables.PNG" />
The output should be new CRF for the subject with the correct data, for example:
<img alt="Screenshot" src="img/crfData.PNG" /></li>
</ul>
<h3 id="example-of-calling-flaskdata-api-using-jquery-older-version">Example of calling FlaskData API using jQuery older version</h3>
<pre><code>  var http = new XMLHttpRequest();
  var url = 'https://dev-api.flaskdata.io/auth/authorize';
  var params = '{"email":"xxx@gmail.com","password":"123456"}';
  http.open('POST', url, true);

  //Send the proper header information along with the request
  http.setRequestHeader('Content-type', 'application/json');

  http.onreadystatechange = function() {//Call a function when the state changes.
      if(http.readyState == 4 &amp;&amp; http.status == 200) {
          alert(http.responseText);
      }
  }
  http.send(params);
</code></pre>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../api_introduction/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                API Introduction
              </div>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.6a3d08fc.min.js"></script>
      <script src="../assets/javascripts/bundle.71201edf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>